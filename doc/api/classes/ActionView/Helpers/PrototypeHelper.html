<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang='en'>
  <head>
    <title>: ActionView::Helpers::PrototypeHelper [Rails Framework Documentation]</title>
    <meta content='text/html; charset=UTF-8' http-equiv='Content-Type'>
    <link href='../../../rdoc-style.css' media='screen' rel='stylesheet' type='text/css'>
    <script type='text/javascript'>
      //<![CDATA[
        function popupCode(url) {
          window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
        }
        
        function toggleCode(id) {
          var code = document.getElementById(id)
        
          code.style.display = code.style.display != 'block' ? 'block' : 'none'
          return true
        }
        
        // Make codeblocks hidden by default
        document.writeln('<' + 'style type="text/css">.method .source pre { display: none }<\/style>')
      //]]>
    </script>
  </head>
  <body class='page'>
    <div class='class' id='wrapper'>
      <div class='header'>
        <h1 class='name'>
          <span class='type'>Module</span>
          ActionView::Helpers::PrototypeHelper
        </h1>
        <ol class='paths'>
          <li>
            <a href="../../../files/vendor/rails/actionpack/lib/action_view/helpers/prototype_helper_rb.html">vendor/rails/actionpack/lib/action_view/helpers/prototype_helper.rb</a>
          </li>
        </ol>
      </div>
      <div id='content'>
        <div id='text'>
          <div id='description'>
            <p>
            <a href="http://www.prototypejs.org/">Prototype</a> is a JavaScript library
            that provides <a
            href="http://en.wikipedia.org/wiki/Document_Object_Model">DOM</a>
            manipulation, <a
            href="http://www.adaptivepath.com/publications/essays/archives/000385.php">Ajax</a>
            functionality, and more traditional object-oriented facilities for
            JavaScript. This module provides a set of helpers to make it more
            convenient to call functions from Prototype using <a
            href="../../Rails.html">Rails</a>, including functionality to call remote
            <a href="../../Rails.html">Rails</a> methods (that is, making a background
            request to a <a href="../../Rails.html">Rails</a> action) using Ajax. This
            means that you can call actions in your controllers without reloading the
            page, but still update certain parts of it using injections into the DOM. A
            common use case is having a form that adds a new element to a list without
            reloading the page or updating a shopping cart total when a new item is
            added.
            </p>
            <h2>Usage</h2>
            <p>
            To be able to use these helpers, you must first include the Prototype
            JavaScript framework in your pages.
            </p>
            <pre>javascript_include_tag 'prototype'</pre>
            <p>
            (See the documentation for <a
            href="JavaScriptHelper.html">ActionView::Helpers::JavaScriptHelper</a> for
            more information on including this and other JavaScript files in your <a
            href="../../Rails.html">Rails</a> templates.)
            </p>
            <p>
            Now you&#8217;re ready to call a remote action either through a link...
            </p>
            <pre>link_to_remote &quot;Add to cart&quot;,&#x000A;  :url =&gt; { :action =&gt; &quot;add&quot;, :id =&gt; product.id },&#x000A;  :update =&gt; { :success =&gt; &quot;cart&quot;, :failure =&gt; &quot;error&quot; }</pre>
            <p>
            &#8230;through a form...
            </p>
            <pre>&lt;% form_remote_tag :url =&gt; '/shipping' do -%&gt;&#x000A;  &lt;div&gt;&lt;%= submit_tag 'Recalculate Shipping' %&gt;&lt;/div&gt;&#x000A;&lt;% end -%&gt;</pre>
            <p>
            &#8230;periodically...
            </p>
            <pre>periodically_call_remote(:url =&gt; 'update', :frequency =&gt; '5', :update =&gt; 'ticker')</pre>
            <p>
            &#8230;or through an observer (i.e., a form or field that is observed and
            calls a remote action when changed).
            </p>
            <pre>&lt;%= observe_field(:searchbox,&#x000A;     :url =&gt; { :action =&gt; :live_search }),&#x000A;     :frequency =&gt; 0.5,&#x000A;     :update =&gt; :hits,&#x000A;     :with =&gt; 'query'&#x000A;     %&gt;</pre>
            <p>
            As you can see, there are numerous ways to use Prototype&#8217;s Ajax
            functions (and actually more than are listed here); check out the
            documentation for each method to find out more about its usage and options.
            </p>
            <h3>Common Options</h3>
            <p>
            See <a href="PrototypeHelper.html#M001918">link_to_remote</a> for
            documentation of options common to all Ajax helpers; any of the options
            specified by <a href="PrototypeHelper.html#M001918">link_to_remote</a> can
            be used by the other helpers.
            </p>
            <h2>Designing your <a href="../../Rails.html">Rails</a> actions for Ajax</h2>
            <p>
            When building your action handlers (that is, the <a
            href="../../Rails.html">Rails</a> actions that receive your background
            requests), it&#8217;s important to remember a few things. First, whatever
            your action would normally return to the browser, it will return to the
            Ajax call. As such, you typically don&#8217;t want to render with a layout.
            This call will cause the layout to be transmitted back to your page, and,
            if you have a full HTML/CSS, will likely mess a lot of things up. You can
            turn the layout off on particular actions by doing the following:
            </p>
            <pre>class SiteController &lt; ActionController::Base&#x000A;  layout &quot;standard&quot;, :except =&gt; [:ajax_method, :more_ajax, :another_ajax]&#x000A;end</pre>
            <p>
            Optionally, you could do this in the method you wish to lack a layout:
            </p>
            <pre>render :layout =&gt; false</pre>
            <p>
            You can tell the type of request from within your action using the
            <tt>request.xhr?</tt> (XmlHttpRequest, the method that Ajax uses to make
            background requests) method.
            </p>
            <pre>def name&#x000A;  # Is this an XmlHttpRequest request?&#x000A;  if (request.xhr?)&#x000A;    render :text =&gt; @name.to_s&#x000A;  else&#x000A;    # No?  Then render an action.&#x000A;    render :action =&gt; 'view_attribute', :attr =&gt; @name&#x000A;  end&#x000A;end</pre>
            <p>
            The else clause can be left off and the current action will render with
            full layout and template. An extension to this solution was posted to Ryan
            Heneise&#8217;s blog at <a
            href=""http://www.artofmission.com/"">ArtOfMission</a>.
            </p>
            <pre>layout proc{ |c| c.request.xhr? ? false : &quot;application&quot; }</pre>
            <p>
            Dropping this in your ApplicationController turns the layout off for every
            request that is an &#8220;xhr&#8221; request.
            </p>
            <p>
            If you are just returning a little data or don&#8217;t want to build a
            template for your output, you may opt to simply render text output, like
            this:
            </p>
            <pre>render :text =&gt; 'Return this from my method!'</pre>
            <p>
            Since whatever the method returns is injected into the DOM, this will
            simply inject some text (or HTML, if you tell it to). This is usually how
            small updates, such updating a cart total or a file count, are handled.
            </p>
            <h2>Updating multiple elements</h2>
            <p>
            See JavaScriptGenerator for information on updating multiple elements on
            the page in an Ajax response.
            </p>
          </div>
          <div id='method-list'>
            <h2>Methods</h2>
            <h3>public instance</h3>
            <ol>
              <li><a href="#M001919">button_to_remote</a></li>
              <li><a href="#M001925">evaluate_remote_response</a></li>
              <li><a href="#M001923">form_remote_for</a></li>
              <li><a href="#M001921">form_remote_tag</a></li>
              <li><a href="#M001918">link_to_remote</a></li>
              <li><a href="#M001927">observe_field</a></li>
              <li><a href="#M001928">observe_form</a></li>
              <li><a href="#M001920">periodically_call_remote</a></li>
              <li><a href="#M001922">remote_form_for</a></li>
              <li><a href="#M001926">remote_function</a></li>
              <li><a href="#M001924">submit_to_remote</a></li>
              <li><a href="#M001929">update_page</a></li>
              <li><a href="#M001930">update_page_tag</a></li>
            </ol>
            <h3>protected instance</h3>
            <ol>
              <li><a href="#M001934">build_callbacks</a></li>
              <li><a href="#M001933">build_observer</a></li>
              <li><a href="#M001932">method_option_to_s</a></li>
              <li><a href="#M001931">options_for_ajax</a></li>
            </ol>
          </div>
          <div id='section'>
            <div id='constants-list'>
              <h2>Constants</h2>
              <div class='name-list'>
                <table summary='Constants'>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>CALLBACKS</td>
                    <td>=</td>
                    <td class='context-item-value'>Set.new([ :create, :uninitialized, :loading, :loaded,                          :interactive, :complete, :failure, :success ] +                          (100..599).to_a)</td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>AJAX_OPTIONS</td>
                    <td>=</td>
                    <td class='context-item-value'>Set.new([ :before, :after, :condition, :url,                          :asynchronous, :method, :insertion, :position,                          :form, :with, :update, :script, :type ]).merge(CALLBACKS)</td>
                  </tr>
                </table>
              </div>
            </div>
            <div id='methods'>
              <h2>Public instance methods</h2>
              <div class='method public-instance' id='method-M001919'>
                <a name='M001919'></a>
                <div class='synopsis'>
                  <span class='name'>button_to_remote</span>
                  <span class='arguments'>(name, options = {}, html_options = {})</span>
                </div>
                <div class='description'>
                  <p>
                  Creates a button with an onclick event which calls a remote action via
                  XMLHttpRequest The options for specifying the target with :url and defining
                  callbacks is the same as link_to_remote.
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M001919-source'); return false">
                    [show source]
                  </a>
                  <pre id='M001919-source'>     <span class="ruby-comment cmt"># File vendor/rails/actionpack/lib/action_view/helpers/prototype_helper.rb, line 263</span>&#x000A;263:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">button_to_remote</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">options</span> = {}, <span class="ruby-identifier">html_options</span> = {})&#x000A;264:         <span class="ruby-identifier">button_to_function</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">remote_function</span>(<span class="ruby-identifier">options</span>), <span class="ruby-identifier">html_options</span>)&#x000A;265:       <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M001925'>
                <a name='M001925'></a>
                <div class='synopsis'>
                  <span class='name'>evaluate_remote_response</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  <p>
                  Returns &#8216;<tt>eval(request.responseText)</tt>&#8217; which is the
                  JavaScript function that <tt><a
                  href="PrototypeHelper.html#M001921">form_remote_tag</a></tt> can call in
                  <tt>:complete</tt> to evaluate a multiple update return document using
                  <tt>update_element_function</tt> calls.
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M001925-source'); return false">
                    [show source]
                  </a>
                  <pre id='M001925-source'>     <span class="ruby-comment cmt"># File vendor/rails/actionpack/lib/action_view/helpers/prototype_helper.rb, line 433</span>&#x000A;433:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">evaluate_remote_response</span>&#x000A;434:         <span class="ruby-value str">&quot;eval(request.responseText)&quot;</span>&#x000A;435:       <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M001923'>
                <a name='M001923'></a>
                <div class='synopsis'>
                  <span class='name'>form_remote_for</span>
                  <span class='arguments'>(record_or_name_or_array, *args, &amp;proc)</span>
                </div>
                <div class='description'>
                  <p>
                  Alias for <a href="PrototypeHelper.html#M001922">remote_form_for</a>
                  </p>
                </div>
              </div>
              <div class='method public-instance' id='method-M001921'>
                <a name='M001921'></a>
                <div class='synopsis'>
                  <span class='name'>form_remote_tag</span>
                  <span class='arguments'>(options = {}, &amp;block)</span>
                </div>
                <div class='description'>
                  <p>
                  Returns a form tag that will submit using XMLHttpRequest in the background
                  instead of the regular reloading POST arrangement. Even though it&#8217;s
                  using JavaScript to serialize the form elements, the form submission will
                  work just like a regular submission as viewed by the receiving side (all
                  elements available in <tt>params</tt>). The options for specifying the
                  target with <tt>:url</tt> and defining callbacks is the same as <tt><a
                  href="PrototypeHelper.html#M001918">link_to_remote</a></tt>.
                  </p>
                  <p>
                  A &#8220;fall-through&#8221; target for browsers that doesn&#8217;t do
                  JavaScript can be specified with the <tt>:action</tt>/<tt>:method</tt>
                  options on <tt>:html</tt>.
                  </p>
                  <p>
                  Example:
                  </p>
                  <pre># Generates:&#x000A;#      &lt;form action=&quot;/some/place&quot; method=&quot;post&quot; onsubmit=&quot;new Ajax.Request('',&#x000A;#      {asynchronous:true, evalScripts:true, parameters:Form.serialize(this)}); return false;&quot;&gt;&#x000A;form_remote_tag :html =&gt; { :action =&gt;&#x000A;  url_for(:controller =&gt; &quot;some&quot;, :action =&gt; &quot;place&quot;) }</pre>
                  <p>
                  The Hash passed to the <tt>:html</tt> key is equivalent to the options
                  (2nd) argument in the <a
                  href="FormTagHelper.html#M002002">FormTagHelper.form_tag</a> method.
                  </p>
                  <p>
                  By default the fall-through action is the same as the one specified in the
                  <tt>:url</tt> (and the default method is <tt>:post</tt>).
                  </p>
                  <p>
                  <a href="PrototypeHelper.html#M001921">form_remote_tag</a> also takes a
                  block, like form_tag:
                  </p>
                  <pre># Generates:&#x000A;#     &lt;form action=&quot;/&quot; method=&quot;post&quot; onsubmit=&quot;new Ajax.Request('/',&#x000A;#     {asynchronous:true, evalScripts:true, parameters:Form.serialize(this)});&#x000A;#     return false;&quot;&gt; &lt;div&gt;&lt;input name=&quot;commit&quot; type=&quot;submit&quot; value=&quot;Save&quot; /&gt;&lt;/div&gt;&#x000A;#     &lt;/form&gt;&#x000A;&lt;% form_remote_tag :url =&gt; '/posts' do -%&gt;&#x000A;  &lt;div&gt;&lt;%= submit_tag 'Save' %&gt;&lt;/div&gt;&#x000A;&lt;% end -%&gt;</pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M001921-source'); return false">
                    [show source]
                  </a>
                  <pre id='M001921-source'>     <span class="ruby-comment cmt"># File vendor/rails/actionpack/lib/action_view/helpers/prototype_helper.rb, line 331</span>&#x000A;331:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">form_remote_tag</span>(<span class="ruby-identifier">options</span> = {}, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)&#x000A;332:         <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:form</span>] = <span class="ruby-keyword kw">true</span>&#x000A;333: &#x000A;334:         <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:html</span>] <span class="ruby-operator">||=</span> {}&#x000A;335:         <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:html</span>][<span class="ruby-identifier">:onsubmit</span>] =&#x000A;336:           (<span class="ruby-identifier">options</span>[<span class="ruby-identifier">:html</span>][<span class="ruby-identifier">:onsubmit</span>] <span class="ruby-operator">?</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:html</span>][<span class="ruby-identifier">:onsubmit</span>] <span class="ruby-operator">+</span> <span class="ruby-value str">&quot;; &quot;</span> <span class="ruby-operator">:</span> <span class="ruby-value str">&quot;&quot;</span>) <span class="ruby-operator">+</span>&#x000A;337:           <span class="ruby-node">&quot;#{remote_function(options)}; return false;&quot;</span>&#x000A;338: &#x000A;339:         <span class="ruby-identifier">form_tag</span>(<span class="ruby-identifier">options</span>[<span class="ruby-identifier">:html</span>].<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">:action</span>) <span class="ruby-operator">||</span> <span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">options</span>[<span class="ruby-identifier">:url</span>]), <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:html</span>], <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)&#x000A;340:       <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M001918'>
                <a name='M001918'></a>
                <div class='synopsis'>
                  <span class='name'>link_to_remote</span>
                  <span class='arguments'>(name, options = {}, html_options = nil)</span>
                </div>
                <div class='description'>
                  <p>
                  Returns a link to a remote action defined by <tt>options[:url]</tt> (using
                  the url_for format) that&#8217;s called in the background using
                  XMLHttpRequest. The result of that request can then be inserted into a DOM
                  object whose id can be specified with <tt>options[:update]</tt>. Usually,
                  the result would be a partial prepared by the controller with render
                  :partial.
                  </p>
                  <p>
                  Examples:
                  </p>
                  <pre># Generates: &lt;a href=&quot;#&quot; onclick=&quot;new Ajax.Updater('posts', '/blog/destroy/3', {asynchronous:true, evalScripts:true});&#x000A;#            return false;&quot;&gt;Delete this post&lt;/a&gt;&#x000A;link_to_remote &quot;Delete this post&quot;, :update =&gt; &quot;posts&quot;,&#x000A;  :url =&gt; { :action =&gt; &quot;destroy&quot;, :id =&gt; post.id }&#x000A;&#x000A;# Generates: &lt;a href=&quot;#&quot; onclick=&quot;new Ajax.Updater('emails', '/mail/list_emails', {asynchronous:true, evalScripts:true});&#x000A;#            return false;&quot;&gt;&lt;img alt=&quot;Refresh&quot; src=&quot;/images/refresh.png?&quot; /&gt;&lt;/a&gt;&#x000A;link_to_remote(image_tag(&quot;refresh&quot;), :update =&gt; &quot;emails&quot;,&#x000A;  :url =&gt; { :action =&gt; &quot;list_emails&quot; })</pre>
                  <p>
                  You can override the generated HTML options by specifying a hash in
                  <tt>options[:html]</tt>.
                  </p>
                  <pre>link_to_remote &quot;Delete this post&quot;, :update =&gt; &quot;posts&quot;,&#x000A;  :url  =&gt; post_url(@post), :method =&gt; :delete,&#x000A;  :html =&gt; { :class  =&gt; &quot;destructive&quot; }</pre>
                  <p>
                  You can also specify a hash for <tt>options[:update]</tt> to allow for easy
                  redirection of output to an other DOM element if a server-side error
                  occurs:
                  </p>
                  <p>
                  Example:
                  </p>
                  <pre># Generates: &lt;a href=&quot;#&quot; onclick=&quot;new Ajax.Updater({success:'posts',failure:'error'}, '/blog/destroy/5',&#x000A;#            {asynchronous:true, evalScripts:true}); return false;&quot;&gt;Delete this post&lt;/a&gt;&#x000A;link_to_remote &quot;Delete this post&quot;,&#x000A;  :url =&gt; { :action =&gt; &quot;destroy&quot;, :id =&gt; post.id },&#x000A;  :update =&gt; { :success =&gt; &quot;posts&quot;, :failure =&gt; &quot;error&quot; }</pre>
                  <p>
                  Optionally, you can use the <tt>options[:position]</tt> parameter to
                  influence how the target DOM element is updated. It must be one of
                  <tt>:before</tt>, <tt>:top</tt>, <tt>:bottom</tt>, or <tt>:after</tt>.
                  </p>
                  <p>
                  The method used is by default POST. You can also specify GET or you can
                  simulate PUT or DELETE over POST. All specified with
                  <tt>options[:method]</tt>
                  </p>
                  <p>
                  Example:
                  </p>
                  <pre># Generates: &lt;a href=&quot;#&quot; onclick=&quot;new Ajax.Request('/person/4', {asynchronous:true, evalScripts:true, method:'delete'});&#x000A;#            return false;&quot;&gt;Destroy&lt;/a&gt;&#x000A;link_to_remote &quot;Destroy&quot;, :url =&gt; person_url(:id =&gt; person), :method =&gt; :delete</pre>
                  <p>
                  By default, these remote requests are processed asynchronous during which
                  various JavaScript callbacks can be triggered (for progress indicators and
                  the likes). All callbacks get access to the <tt>request</tt> object, which
                  holds the underlying XMLHttpRequest.
                  </p>
                  <p>
                  To access the server response, use <tt>request.responseText</tt>, to find
                  out the HTTP status, use <tt>request.status</tt>.
                  </p>
                  <p>
                  Example:
                  </p>
                  <pre># Generates: &lt;a href=&quot;#&quot; onclick=&quot;new Ajax.Request('/words/undo?n=33', {asynchronous:true, evalScripts:true,&#x000A;#            onComplete:function(request){undoRequestCompleted(request)}}); return false;&quot;&gt;hello&lt;/a&gt;&#x000A;word = 'hello'&#x000A;link_to_remote word,&#x000A;  :url =&gt; { :action =&gt; &quot;undo&quot;, :n =&gt; word_counter },&#x000A;  :complete =&gt; &quot;undoRequestCompleted(request)&quot;</pre>
                  <p>
                  The callbacks that may be specified are (in order):
                  </p>
                  <table>
                  <tr><td valign="top"><tt>:loading</tt>:</td><td>Called when the remote document is being loaded with data by the browser.
                  
                  </td></tr>
                  <tr><td valign="top"><tt>:loaded</tt>:</td><td>Called when the browser has finished loading the remote document.
                  
                  </td></tr>
                  <tr><td valign="top"><tt>:interactive</tt>:</td><td>Called when the user can interact with the remote document, even though it
                  has not finished loading.
                  
                  </td></tr>
                  <tr><td valign="top"><tt>:success</tt>:</td><td>Called when the XMLHttpRequest is completed, and the HTTP status code is in
                  the 2XX range.
                  
                  </td></tr>
                  <tr><td valign="top"><tt>:failure</tt>:</td><td>Called when the XMLHttpRequest is completed, and the HTTP status code is
                  not in the 2XX range.
                  
                  </td></tr>
                  <tr><td valign="top"><tt>:complete</tt>:</td><td>Called when the XMLHttpRequest is complete (fires after success/failure if
                  they are present).
                  
                  </td></tr>
                  </table>
                  <p>
                  You can further refine <tt>:success</tt> and <tt>:failure</tt> by adding
                  additional callbacks for specific status codes.
                  </p>
                  <p>
                  Example:
                  </p>
                  <pre># Generates: &lt;a href=&quot;#&quot; onclick=&quot;new Ajax.Request('/testing/action', {asynchronous:true, evalScripts:true,&#x000A;#            on404:function(request){alert('Not found...? Wrong URL...?')},&#x000A;#            onFailure:function(request){alert('HTTP Error ' + request.status + '!')}}); return false;&quot;&gt;hello&lt;/a&gt;&#x000A;link_to_remote word,&#x000A;  :url =&gt; { :action =&gt; &quot;action&quot; },&#x000A;  404 =&gt; &quot;alert('Not found...? Wrong URL...?')&quot;,&#x000A;  :failure =&gt; &quot;alert('HTTP Error ' + request.status + '!')&quot;</pre>
                  <p>
                  A status code callback overrides the success/failure handlers if present.
                  </p>
                  <p>
                  If you for some reason or another need synchronous processing
                  (that&#8217;ll block the browser while the request is happening), you can
                  specify <tt>options[:type] = :synchronous</tt>.
                  </p>
                  <p>
                  You can customize further browser side call logic by passing in JavaScript
                  code snippets via some optional parameters. In their order of use these
                  are:
                  </p>
                  <table>
                  <tr><td valign="top"><tt>:confirm</tt>:</td><td>Adds confirmation dialog.
                  
                  </td></tr>
                  <tr><td valign="top"><tt>:condition</tt>:</td><td>Perform remote request conditionally by this expression. Use this to
                  describe browser-side conditions when request should not be initiated.
                  
                  </td></tr>
                  <tr><td valign="top"><tt>:before</tt>:</td><td>Called before request is initiated.
                  
                  </td></tr>
                  <tr><td valign="top"><tt>:after</tt>:</td><td>Called immediately after request was initiated and before
                  <tt>:loading</tt>.
                  
                  </td></tr>
                  <tr><td valign="top"><tt>:submit</tt>:</td><td>Specifies the DOM element ID that&#8217;s used as the parent of the form
                  elements. By default this is the current form, but it could just as well be
                  the ID of a table row or any other DOM element.
                  
                  </td></tr>
                  <tr><td valign="top"><tt>:with</tt>:</td><td>A JavaScript expression specifying the parameters for the XMLHttpRequest.
                  Any expressions should return a valid URL query string.
                  
                  <p>
                  Example:
                  </p>
                  <pre>:with =&gt; &quot;'name=' + $('name').value&quot;</pre>
                  </td></tr>
                  </table>
                  <p>
                  You can generate a link that uses AJAX in the general case, while degrading
                  gracefully to plain link behavior in the absence of JavaScript by setting
                  <tt>html_options[:href]</tt> to an alternate URL. Note the extra curly
                  braces around the <tt>options</tt> hash separate it as the second parameter
                  from <tt>html_options</tt>, the third.
                  </p>
                  <p>
                  Example:
                  </p>
                  <pre>link_to_remote &quot;Delete this post&quot;,&#x000A;  { :update =&gt; &quot;posts&quot;, :url =&gt; { :action =&gt; &quot;destroy&quot;, :id =&gt; post.id } },&#x000A;  :href =&gt; url_for(:action =&gt; &quot;destroy&quot;, :id =&gt; post.id)</pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M001918-source'); return false">
                    [show source]
                  </a>
                  <pre id='M001918-source'>     <span class="ruby-comment cmt"># File vendor/rails/actionpack/lib/action_view/helpers/prototype_helper.rb, line 255</span>&#x000A;255:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">link_to_remote</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">options</span> = {}, <span class="ruby-identifier">html_options</span> = <span class="ruby-keyword kw">nil</span>)&#x000A;256:         <span class="ruby-identifier">link_to_function</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">remote_function</span>(<span class="ruby-identifier">options</span>), <span class="ruby-identifier">html_options</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">options</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">:html</span>))&#x000A;257:       <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M001927'>
                <a name='M001927'></a>
                <div class='synopsis'>
                  <span class='name'>observe_field</span>
                  <span class='arguments'>(field_id, options = {})</span>
                </div>
                <div class='description'>
                  <p>
                  Observes the field with the DOM ID specified by <tt>field_id</tt> and calls
                  a callback when its contents have changed. The default callback is an Ajax
                  call. By default the value of the observed field is sent as a parameter
                  with the Ajax call.
                  </p>
                  <p>
                  Example:
                  </p>
                  <pre># Generates: new Form.Element.Observer('suggest', 0.25, function(element, value) {new Ajax.Updater('suggest',&#x000A;#         '/testing/find_suggestion', {asynchronous:true, evalScripts:true, parameters:'q=' + value})})&#x000A;&lt;%= observe_field :suggest, :url =&gt; { :action =&gt; :find_suggestion },&#x000A;     :frequency =&gt; 0.25,&#x000A;     :update =&gt; :suggest,&#x000A;     :with =&gt; 'q'&#x000A;     %&gt;</pre>
                  <p>
                  Required <tt>options</tt> are either of:
                  </p>
                  <table>
                  <tr><td valign="top"><tt>:url</tt>:</td><td><tt>url_for</tt>-style options for the action to call when the field has
                  changed.
                  
                  </td></tr>
                  <tr><td valign="top"><tt>:function</tt>:</td><td>Instead of making a remote call to a URL, you can specify javascript code
                  to be called instead. Note that the value of this option is used as the
                  <b>body</b> of the javascript function, a function definition with
                  parameters named element and value will be generated for you for example:
                  
                  <pre>observe_field(&quot;glass&quot;, :frequency =&gt; 1, :function =&gt; &quot;alert('Element changed')&quot;)</pre>
                  <p>
                  will generate:
                  </p>
                  <pre>new Form.Element.Observer('glass', 1, function(element, value) {alert('Element changed')})</pre>
                  <p>
                  The element parameter is the DOM element being observed, and the value is
                  its value at the time the observer is triggered.
                  </p>
                  </td></tr>
                  </table>
                  <p>
                  Additional options are:
                  </p>
                  <table>
                  <tr><td valign="top"><tt>:frequency</tt>:</td><td>The frequency (in seconds) at which changes to this field will be detected.
                  Not setting this option at all or to a value equal to or less than zero
                  will use event based observation instead of time based observation.
                  
                  </td></tr>
                  <tr><td valign="top"><tt>:update</tt>:</td><td>Specifies the DOM ID of the element whose innerHTML should be updated with
                  the XMLHttpRequest response text.
                  
                  </td></tr>
                  <tr><td valign="top"><tt>:with</tt>:</td><td>A JavaScript expression specifying the parameters for the XMLHttpRequest.
                  The default is to send the key and value of the observed field. Any custom
                  expressions should return a valid URL query string. The value of the field
                  is stored in the JavaScript variable <tt>value</tt>.
                  
                  <p>
                  Examples
                  </p>
                  <pre>:with =&gt; &quot;'my_custom_key=' + value&quot;&#x000A;:with =&gt; &quot;'person[name]=' + prompt('New name')&quot;&#x000A;:with =&gt; &quot;Form.Element.serialize('other-field')&quot;</pre>
                  <p>
                  Finally
                  </p>
                  <pre>:with =&gt; 'name'</pre>
                  <p>
                  is shorthand for
                  </p>
                  <pre>:with =&gt; &quot;'name=' + value&quot;</pre>
                  <p>
                  This essentially just changes the key of the parameter.
                  </p>
                  </td></tr>
                  </table>
                  <p>
                  Additionally, you may specify any of the options documented in the
                  <em>Common options</em> section at the top of this document.
                  </p>
                  <p>
                  Example:
                  </p>
                  <pre># Sends params: {:title =&gt; 'Title of the book'} when the book_title input&#x000A;# field is changed.&#x000A;observe_field 'book_title',&#x000A;  :url =&gt; 'http://example.com/books/edit/1',&#x000A;  :with =&gt; 'title'</pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M001927-source'); return false">
                    [show source]
                  </a>
                  <pre id='M001927-source'>     <span class="ruby-comment cmt"># File vendor/rails/actionpack/lib/action_view/helpers/prototype_helper.rb, line 547</span>&#x000A;547:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">observe_field</span>(<span class="ruby-identifier">field_id</span>, <span class="ruby-identifier">options</span> = {})&#x000A;548:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:frequency</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:frequency</span>] <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>&#x000A;549:           <span class="ruby-identifier">build_observer</span>(<span class="ruby-value str">'Form.Element.Observer'</span>, <span class="ruby-identifier">field_id</span>, <span class="ruby-identifier">options</span>)&#x000A;550:         <span class="ruby-keyword kw">else</span>&#x000A;551:           <span class="ruby-identifier">build_observer</span>(<span class="ruby-value str">'Form.Element.EventObserver'</span>, <span class="ruby-identifier">field_id</span>, <span class="ruby-identifier">options</span>)&#x000A;552:         <span class="ruby-keyword kw">end</span>&#x000A;553:       <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M001928'>
                <a name='M001928'></a>
                <div class='synopsis'>
                  <span class='name'>observe_form</span>
                  <span class='arguments'>(form_id, options = {})</span>
                </div>
                <div class='description'>
                  <p>
                  Observes the form with the DOM ID specified by <tt>form_id</tt> and calls a
                  callback when its contents have changed. The default callback is an Ajax
                  call. By default all fields of the observed field are sent as parameters
                  with the Ajax call.
                  </p>
                  <p>
                  The <tt>options</tt> for <tt><a
                  href="PrototypeHelper.html#M001928">observe_form</a></tt> are the same as
                  the options for <tt><a
                  href="PrototypeHelper.html#M001927">observe_field</a></tt>. The JavaScript
                  variable <tt>value</tt> available to the <tt>:with</tt> option is set to
                  the serialized form by default.
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M001928-source'); return false">
                    [show source]
                  </a>
                  <pre id='M001928-source'>     <span class="ruby-comment cmt"># File vendor/rails/actionpack/lib/action_view/helpers/prototype_helper.rb, line 563</span>&#x000A;563:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">observe_form</span>(<span class="ruby-identifier">form_id</span>, <span class="ruby-identifier">options</span> = {})&#x000A;564:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:frequency</span>]&#x000A;565:           <span class="ruby-identifier">build_observer</span>(<span class="ruby-value str">'Form.Observer'</span>, <span class="ruby-identifier">form_id</span>, <span class="ruby-identifier">options</span>)&#x000A;566:         <span class="ruby-keyword kw">else</span>&#x000A;567:           <span class="ruby-identifier">build_observer</span>(<span class="ruby-value str">'Form.EventObserver'</span>, <span class="ruby-identifier">form_id</span>, <span class="ruby-identifier">options</span>)&#x000A;568:         <span class="ruby-keyword kw">end</span>&#x000A;569:       <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M001920'>
                <a name='M001920'></a>
                <div class='synopsis'>
                  <span class='name'>periodically_call_remote</span>
                  <span class='arguments'>(options = {})</span>
                </div>
                <div class='description'>
                  <p>
                  Periodically calls the specified url (<tt>options[:url]</tt>) every
                  <tt>options[:frequency]</tt> seconds (default is 10). Usually used to
                  update a specified div (<tt>options[:update]</tt>) with the results of the
                  remote call. The options for specifying the target with <tt>:url</tt> and
                  defining callbacks is the same as link_to_remote. Examples:
                  </p>
                  <pre># Call get_averages and put its results in 'avg' every 10 seconds&#x000A;# Generates:&#x000A;#      new PeriodicalExecuter(function() {new Ajax.Updater('avg', '/grades/get_averages',&#x000A;#      {asynchronous:true, evalScripts:true})}, 10)&#x000A;periodically_call_remote(:url =&gt; { :action =&gt; 'get_averages' }, :update =&gt; 'avg')&#x000A;&#x000A;# Call invoice every 10 seconds with the id of the customer&#x000A;# If it succeeds, update the invoice DIV; if it fails, update the error DIV&#x000A;# Generates:&#x000A;#      new PeriodicalExecuter(function() {new Ajax.Updater({success:'invoice',failure:'error'},&#x000A;#      '/testing/invoice/16', {asynchronous:true, evalScripts:true})}, 10)&#x000A;periodically_call_remote(:url =&gt; { :action =&gt; 'invoice', :id =&gt; customer.id },&#x000A;   :update =&gt; { :success =&gt; &quot;invoice&quot;, :failure =&gt; &quot;error&quot; }&#x000A;&#x000A;# Call update every 20 seconds and update the new_block DIV&#x000A;# Generates:&#x000A;# new PeriodicalExecuter(function() {new Ajax.Updater('news_block', 'update', {asynchronous:true, evalScripts:true})}, 20)&#x000A;periodically_call_remote(:url =&gt; 'update', :frequency =&gt; '20', :update =&gt; 'news_block')</pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M001920-source'); return false">
                    [show source]
                  </a>
                  <pre id='M001920-source'>     <span class="ruby-comment cmt"># File vendor/rails/actionpack/lib/action_view/helpers/prototype_helper.rb, line 292</span>&#x000A;292:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">periodically_call_remote</span>(<span class="ruby-identifier">options</span> = {})&#x000A;293:          <span class="ruby-identifier">frequency</span> = <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:frequency</span>] <span class="ruby-operator">||</span> <span class="ruby-value">10</span> <span class="ruby-comment cmt"># every ten seconds by default</span>&#x000A;294:          <span class="ruby-identifier">code</span> = <span class="ruby-node">&quot;new PeriodicalExecuter(function() {#{remote_function(options)}}, #{frequency})&quot;</span>&#x000A;295:          <span class="ruby-identifier">javascript_tag</span>(<span class="ruby-identifier">code</span>)&#x000A;296:       <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M001922'>
                <a name='M001922'></a>
                <div class='synopsis'>
                  <span class='name'>remote_form_for</span>
                  <span class='arguments'>(record_or_name_or_array, *args, &amp;proc)</span>
                </div>
                <div class='description'>
                  <p>
                  Creates a form that will submit using XMLHttpRequest in the background
                  instead of the regular reloading POST arrangement and a scope around a
                  specific resource that is used as a base for questioning about values for
                  the fields.
                  </p>
                  <h3>Resource</h3>
                  <p>
                  Example:
                  </p>
                  <pre>&lt;% remote_form_for(@post) do |f| %&gt;&#x000A;  ...&#x000A;&lt;% end %&gt;</pre>
                  <p>
                  This will expand to be the same as:
                  </p>
                  <pre>&lt;% remote_form_for :post, @post, :url =&gt; post_path(@post), :html =&gt; { :method =&gt; :put, :class =&gt; &quot;edit_post&quot;, :id =&gt; &quot;edit_post_45&quot; } do |f| %&gt;&#x000A;  ...&#x000A;&lt;% end %&gt;</pre>
                  <h3>Nested Resource</h3>
                  <p>
                  Example:
                  </p>
                  <pre>&lt;% remote_form_for([@post, @comment]) do |f| %&gt;&#x000A;  ...&#x000A;&lt;% end %&gt;</pre>
                  <p>
                  This will expand to be the same as:
                  </p>
                  <pre>&lt;% remote_form_for :comment, @comment, :url =&gt; post_comment_path(@post, @comment), :html =&gt; { :method =&gt; :put, :class =&gt; &quot;edit_comment&quot;, :id =&gt; &quot;edit_comment_45&quot; } do |f| %&gt;&#x000A;  ...&#x000A;&lt;% end %&gt;</pre>
                  <p>
                  If you don&#8217;t need to attach a form to a resource, then check out
                  form_remote_tag.
                  </p>
                  <p>
                  See <a href="FormHelper.html#M001877">FormHelper#form_for</a> for
                  additional semantics.
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M001922-source'); return false">
                    [show source]
                  </a>
                  <pre id='M001922-source'>     <span class="ruby-comment cmt"># File vendor/rails/actionpack/lib/action_view/helpers/prototype_helper.rb, line 376</span>&#x000A;376:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">remote_form_for</span>(<span class="ruby-identifier">record_or_name_or_array</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">args</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">proc</span>)&#x000A;377:         <span class="ruby-identifier">options</span> = <span class="ruby-identifier">args</span>.<span class="ruby-identifier">extract_options!</span>&#x000A;378: &#x000A;379:         <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">record_or_name_or_array</span>&#x000A;380:         <span class="ruby-keyword kw">when</span> <span class="ruby-constant">String</span>, <span class="ruby-constant">Symbol</span>&#x000A;381:           <span class="ruby-identifier">object_name</span> = <span class="ruby-identifier">record_or_name_or_array</span>&#x000A;382:         <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Array</span>&#x000A;383:           <span class="ruby-identifier">object</span> = <span class="ruby-identifier">record_or_name_or_array</span>.<span class="ruby-identifier">last</span>&#x000A;384:           <span class="ruby-identifier">object_name</span> = <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">RecordIdentifier</span>.<span class="ruby-identifier">singular_class_name</span>(<span class="ruby-identifier">object</span>)&#x000A;385:           <span class="ruby-identifier">apply_form_for_options!</span>(<span class="ruby-identifier">record_or_name_or_array</span>, <span class="ruby-identifier">options</span>)&#x000A;386:           <span class="ruby-identifier">args</span>.<span class="ruby-identifier">unshift</span> <span class="ruby-identifier">object</span>&#x000A;387:         <span class="ruby-keyword kw">else</span>&#x000A;388:           <span class="ruby-identifier">object</span>      = <span class="ruby-identifier">record_or_name_or_array</span>&#x000A;389:           <span class="ruby-identifier">object_name</span> = <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">RecordIdentifier</span>.<span class="ruby-identifier">singular_class_name</span>(<span class="ruby-identifier">record_or_name_or_array</span>)&#x000A;390:           <span class="ruby-identifier">apply_form_for_options!</span>(<span class="ruby-identifier">object</span>, <span class="ruby-identifier">options</span>)&#x000A;391:           <span class="ruby-identifier">args</span>.<span class="ruby-identifier">unshift</span> <span class="ruby-identifier">object</span>&#x000A;392:         <span class="ruby-keyword kw">end</span>&#x000A;393: &#x000A;394:         <span class="ruby-identifier">concat</span>(<span class="ruby-identifier">form_remote_tag</span>(<span class="ruby-identifier">options</span>))&#x000A;395:         <span class="ruby-identifier">fields_for</span>(<span class="ruby-identifier">object_name</span>, <span class="ruby-operator">*</span>(<span class="ruby-identifier">args</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">options</span>), <span class="ruby-operator">&amp;</span><span class="ruby-identifier">proc</span>)&#x000A;396:         <span class="ruby-identifier">concat</span>(<span class="ruby-value str">'&lt;/form&gt;'</span>)&#x000A;397:       <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M001926'>
                <a name='M001926'></a>
                <div class='synopsis'>
                  <span class='name'>remote_function</span>
                  <span class='arguments'>(options)</span>
                </div>
                <div class='description'>
                  <p>
                  Returns the JavaScript needed for a remote function. Takes the same
                  arguments as link_to_remote.
                  </p>
                  <p>
                  Example:
                  </p>
                  <pre># Generates: &lt;select id=&quot;options&quot; onchange=&quot;new Ajax.Updater('options',&#x000A;# '/testing/update_options', {asynchronous:true, evalScripts:true})&quot;&gt;&#x000A;&lt;select id=&quot;options&quot; onchange=&quot;&lt;%= remote_function(:update =&gt; &quot;options&quot;,&#x000A;    :url =&gt; { :action =&gt; :update_options }) %&gt;&quot;&gt;&#x000A;  &lt;option value=&quot;0&quot;&gt;Hello&lt;/option&gt;&#x000A;  &lt;option value=&quot;1&quot;&gt;World&lt;/option&gt;&#x000A;&lt;/select&gt;</pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M001926-source'); return false">
                    [show source]
                  </a>
                  <pre id='M001926-source'>     <span class="ruby-comment cmt"># File vendor/rails/actionpack/lib/action_view/helpers/prototype_helper.rb, line 448</span>&#x000A;448:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">remote_function</span>(<span class="ruby-identifier">options</span>)&#x000A;449:         <span class="ruby-identifier">javascript_options</span> = <span class="ruby-identifier">options_for_ajax</span>(<span class="ruby-identifier">options</span>)&#x000A;450: &#x000A;451:         <span class="ruby-identifier">update</span> = <span class="ruby-value str">''</span>&#x000A;452:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:update</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:update</span>].<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Hash</span>)&#x000A;453:           <span class="ruby-identifier">update</span>  = []&#x000A;454:           <span class="ruby-identifier">update</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;success:'#{options[:update][:success]}'&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:update</span>][<span class="ruby-identifier">:success</span>]&#x000A;455:           <span class="ruby-identifier">update</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;failure:'#{options[:update][:failure]}'&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:update</span>][<span class="ruby-identifier">:failure</span>]&#x000A;456:           <span class="ruby-identifier">update</span>  = <span class="ruby-value str">'{'</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">update</span>.<span class="ruby-identifier">join</span>(<span class="ruby-value str">','</span>) <span class="ruby-operator">+</span> <span class="ruby-value str">'}'</span>&#x000A;457:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:update</span>]&#x000A;458:           <span class="ruby-identifier">update</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;'#{options[:update]}'&quot;</span>&#x000A;459:         <span class="ruby-keyword kw">end</span>&#x000A;460: &#x000A;461:         <span class="ruby-identifier">function</span> = <span class="ruby-identifier">update</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-value">?&#x000A;462: </span>          <span class="ruby-value str">&quot;new Ajax.Request(&quot;</span> <span class="ruby-operator">:</span>&#x000A;463:           <span class="ruby-node">&quot;new Ajax.Updater(#{update}, &quot;</span>&#x000A;464: &#x000A;465:         <span class="ruby-identifier">url_options</span> = <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:url</span>]&#x000A;466:         <span class="ruby-identifier">url_options</span> = <span class="ruby-identifier">url_options</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">:escape</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">url_options</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Hash</span>)&#x000A;467:         <span class="ruby-identifier">function</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;'#{escape_javascript(url_for(url_options))}'&quot;</span>&#x000A;468:         <span class="ruby-identifier">function</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;, #{javascript_options})&quot;</span>&#x000A;469: &#x000A;470:         <span class="ruby-identifier">function</span> = <span class="ruby-node">&quot;#{options[:before]}; #{function}&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:before</span>]&#x000A;471:         <span class="ruby-identifier">function</span> = <span class="ruby-node">&quot;#{function}; #{options[:after]}&quot;</span>  <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:after</span>]&#x000A;472:         <span class="ruby-identifier">function</span> = <span class="ruby-node">&quot;if (#{options[:condition]}) { #{function}; }&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:condition</span>]&#x000A;473:         <span class="ruby-identifier">function</span> = <span class="ruby-node">&quot;if (confirm('#{escape_javascript(options[:confirm])}')) { #{function}; }&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:confirm</span>]&#x000A;474: &#x000A;475:         <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">function</span>&#x000A;476:       <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M001924'>
                <a name='M001924'></a>
                <div class='synopsis'>
                  <span class='name'>submit_to_remote</span>
                  <span class='arguments'>(name, value, options = {})</span>
                </div>
                <div class='description'>
                  <p>
                  Returns a button input tag with the element name of <tt>name</tt> and a
                  value (i.e., display text) of <tt>value</tt> that will submit form using
                  XMLHttpRequest in the background instead of a regular POST request that
                  reloads the page.
                  </p>
                  <pre># Create a button that submits to the create action&#x000A;#&#x000A;# Generates: &lt;input name=&quot;create_btn&quot; onclick=&quot;new Ajax.Request('/testing/create',&#x000A;#     {asynchronous:true, evalScripts:true, parameters:Form.serialize(this.form)});&#x000A;#     return false;&quot; type=&quot;button&quot; value=&quot;Create&quot; /&gt;&#x000A;&lt;%= submit_to_remote 'create_btn', 'Create', :url =&gt; { :action =&gt; 'create' } %&gt;&#x000A;&#x000A;# Submit to the remote action update and update the DIV succeed or fail based&#x000A;# on the success or failure of the request&#x000A;#&#x000A;# Generates: &lt;input name=&quot;update_btn&quot; onclick=&quot;new Ajax.Updater({success:'succeed',failure:'fail'},&#x000A;#      '/testing/update', {asynchronous:true, evalScripts:true, parameters:Form.serialize(this.form)});&#x000A;#      return false;&quot; type=&quot;button&quot; value=&quot;Update&quot; /&gt;&#x000A;&lt;%= submit_to_remote 'update_btn', 'Update', :url =&gt; { :action =&gt; 'update' },&#x000A;   :update =&gt; { :success =&gt; &quot;succeed&quot;, :failure =&gt; &quot;fail&quot; }</pre>
                  <p>
                  <tt>options</tt> argument is the same as in form_remote_tag.
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M001924-source'); return false">
                    [show source]
                  </a>
                  <pre id='M001924-source'>     <span class="ruby-comment cmt"># File vendor/rails/actionpack/lib/action_view/helpers/prototype_helper.rb, line 421</span>&#x000A;421:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">submit_to_remote</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">value</span>, <span class="ruby-identifier">options</span> = {})&#x000A;422:         <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:with</span>] <span class="ruby-operator">||=</span> <span class="ruby-value str">'Form.serialize(this.form)'</span>&#x000A;423: &#x000A;424:         <span class="ruby-identifier">html_options</span> = <span class="ruby-identifier">options</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">:html</span>) <span class="ruby-operator">||</span> {}&#x000A;425:         <span class="ruby-identifier">html_options</span>[<span class="ruby-identifier">:name</span>] = <span class="ruby-identifier">name</span>&#x000A;426: &#x000A;427:         <span class="ruby-identifier">button_to_remote</span>(<span class="ruby-identifier">value</span>, <span class="ruby-identifier">options</span>, <span class="ruby-identifier">html_options</span>)&#x000A;428:       <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M001929'>
                <a name='M001929'></a>
                <div class='synopsis'>
                  <span class='name'>update_page</span>
                  <span class='arguments'>(&amp;block)</span>
                </div>
                <div class='description'>
                  <p>
                  Yields a JavaScriptGenerator and returns the generated JavaScript code. Use
                  this to update multiple elements on a page in an Ajax response. See
                  JavaScriptGenerator for more information.
                  </p>
                  <p>
                  Example:
                  </p>
                  <pre>update_page do |page|&#x000A;  page.hide 'spinner'&#x000A;end</pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M001929-source'); return false">
                    [show source]
                  </a>
                  <pre id='M001929-source'>      <span class="ruby-comment cmt"># File vendor/rails/actionpack/lib/action_view/helpers/prototype_helper.rb, line 1028</span>&#x000A;1028:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">update_page</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)&#x000A;1029:         <span class="ruby-constant">JavaScriptGenerator</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@template</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>).<span class="ruby-identifier">to_s</span>&#x000A;1030:       <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M001930'>
                <a name='M001930'></a>
                <div class='synopsis'>
                  <span class='name'>update_page_tag</span>
                  <span class='arguments'>(html_options = {}, &amp;block)</span>
                </div>
                <div class='description'>
                  <p>
                  Works like <a href="PrototypeHelper.html#M001929">update_page</a> but wraps
                  the generated JavaScript in a <script> tag. Use this to include generated
                  JavaScript in an ERb template. See JavaScriptGenerator for more
                  information.
                  </p>
                  <p>
                  <tt>html_options</tt> may be a hash of <script> attributes to be passed to
                  <a
                  href="JavaScriptHelper.html#M002032">ActionView::Helpers::JavaScriptHelper#javascript_tag</a>.
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M001930-source'); return false">
                    [show source]
                  </a>
                  <pre id='M001930-source'>      <span class="ruby-comment cmt"># File vendor/rails/actionpack/lib/action_view/helpers/prototype_helper.rb, line 1038</span>&#x000A;1038:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">update_page_tag</span>(<span class="ruby-identifier">html_options</span> = {}, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)&#x000A;1039:         <span class="ruby-identifier">javascript_tag</span> <span class="ruby-identifier">update_page</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>), <span class="ruby-identifier">html_options</span>&#x000A;1040:       <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <h2>Protected instance methods</h2>
              <div class='method protected-instance' id='method-M001934'>
                <a name='M001934'></a>
                <div class='synopsis'>
                  <span class='name'>build_callbacks</span>
                  <span class='arguments'>(options)</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M001934-source'); return false">
                    [show source]
                  </a>
                  <pre id='M001934-source'>      <span class="ruby-comment cmt"># File vendor/rails/actionpack/lib/action_view/helpers/prototype_helper.rb, line 1091</span>&#x000A;1091:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">build_callbacks</span>(<span class="ruby-identifier">options</span>)&#x000A;1092:         <span class="ruby-identifier">callbacks</span> = {}&#x000A;1093:         <span class="ruby-identifier">options</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">callback</span>, <span class="ruby-identifier">code</span><span class="ruby-operator">|</span>&#x000A;1094:           <span class="ruby-keyword kw">if</span> <span class="ruby-constant">CALLBACKS</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">callback</span>)&#x000A;1095:             <span class="ruby-identifier">name</span> = <span class="ruby-value str">'on'</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">callback</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">capitalize</span>&#x000A;1096:             <span class="ruby-identifier">callbacks</span>[<span class="ruby-identifier">name</span>] = <span class="ruby-node">&quot;function(request){#{code}}&quot;</span>&#x000A;1097:           <span class="ruby-keyword kw">end</span>&#x000A;1098:         <span class="ruby-keyword kw">end</span>&#x000A;1099:         <span class="ruby-identifier">callbacks</span>&#x000A;1100:       <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method protected-instance' id='method-M001933'>
                <a name='M001933'></a>
                <div class='synopsis'>
                  <span class='name'>build_observer</span>
                  <span class='arguments'>(klass, name, options = {})</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M001933-source'); return false">
                    [show source]
                  </a>
                  <pre id='M001933-source'>      <span class="ruby-comment cmt"># File vendor/rails/actionpack/lib/action_view/helpers/prototype_helper.rb, line 1075</span>&#x000A;1075:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">build_observer</span>(<span class="ruby-identifier">klass</span>, <span class="ruby-identifier">name</span>, <span class="ruby-identifier">options</span> = {})&#x000A;1076:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:with</span>] <span class="ruby-operator">&amp;&amp;</span> (<span class="ruby-identifier">options</span>[<span class="ruby-identifier">:with</span>] <span class="ruby-operator">!~</span> <span class="ruby-regexp re">/[\{=(.]/</span>)&#x000A;1077:           <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:with</span>] = <span class="ruby-node">&quot;'#{options[:with]}=' + encodeURIComponent(value)&quot;</span>&#x000A;1078:         <span class="ruby-keyword kw">else</span>&#x000A;1079:           <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:with</span>] <span class="ruby-operator">||=</span> <span class="ruby-value str">'value'</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:function</span>]&#x000A;1080:         <span class="ruby-keyword kw">end</span>&#x000A;1081: &#x000A;1082:         <span class="ruby-identifier">callback</span> = <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:function</span>] <span class="ruby-operator">||</span> <span class="ruby-identifier">remote_function</span>(<span class="ruby-identifier">options</span>)&#x000A;1083:         <span class="ruby-identifier">javascript</span>  = <span class="ruby-node">&quot;new #{klass}('#{name}', &quot;</span>&#x000A;1084:         <span class="ruby-identifier">javascript</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;#{options[:frequency]}, &quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:frequency</span>]&#x000A;1085:         <span class="ruby-identifier">javascript</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;function(element, value) {&quot;</span>&#x000A;1086:         <span class="ruby-identifier">javascript</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;#{callback}}&quot;</span>&#x000A;1087:         <span class="ruby-identifier">javascript</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;)&quot;</span>&#x000A;1088:         <span class="ruby-identifier">javascript_tag</span>(<span class="ruby-identifier">javascript</span>)&#x000A;1089:       <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method protected-instance' id='method-M001932'>
                <a name='M001932'></a>
                <div class='synopsis'>
                  <span class='name'>method_option_to_s</span>
                  <span class='arguments'>(method)</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M001932-source'); return false">
                    [show source]
                  </a>
                  <pre id='M001932-source'>      <span class="ruby-comment cmt"># File vendor/rails/actionpack/lib/action_view/helpers/prototype_helper.rb, line 1071</span>&#x000A;1071:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">method_option_to_s</span>(<span class="ruby-identifier">method</span>)&#x000A;1072:         (<span class="ruby-identifier">method</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">String</span>) <span class="ruby-keyword kw">and</span> <span class="ruby-operator">!</span><span class="ruby-identifier">method</span>.<span class="ruby-identifier">index</span>(<span class="ruby-value str">&quot;'&quot;</span>).<span class="ruby-identifier">nil?</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">method</span> <span class="ruby-operator">:</span> <span class="ruby-node">&quot;'#{method}'&quot;</span>&#x000A;1073:       <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method protected-instance' id='method-M001931'>
                <a name='M001931'></a>
                <div class='synopsis'>
                  <span class='name'>options_for_ajax</span>
                  <span class='arguments'>(options)</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M001931-source'); return false">
                    [show source]
                  </a>
                  <pre id='M001931-source'>      <span class="ruby-comment cmt"># File vendor/rails/actionpack/lib/action_view/helpers/prototype_helper.rb, line 1043</span>&#x000A;1043:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">options_for_ajax</span>(<span class="ruby-identifier">options</span>)&#x000A;1044:         <span class="ruby-identifier">js_options</span> = <span class="ruby-identifier">build_callbacks</span>(<span class="ruby-identifier">options</span>)&#x000A;1045: &#x000A;1046:         <span class="ruby-identifier">js_options</span>[<span class="ruby-value str">'asynchronous'</span>] = <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:type</span>] <span class="ruby-operator">!=</span> <span class="ruby-identifier">:synchronous</span>&#x000A;1047:         <span class="ruby-identifier">js_options</span>[<span class="ruby-value str">'method'</span>]       = <span class="ruby-identifier">method_option_to_s</span>(<span class="ruby-identifier">options</span>[<span class="ruby-identifier">:method</span>]) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:method</span>]&#x000A;1048:         <span class="ruby-identifier">js_options</span>[<span class="ruby-value str">'insertion'</span>]    = <span class="ruby-node">&quot;'#{options[:position].to_s.downcase}'&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:position</span>]&#x000A;1049:         <span class="ruby-identifier">js_options</span>[<span class="ruby-value str">'evalScripts'</span>]  = <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:script</span>].<span class="ruby-identifier">nil?</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:script</span>]&#x000A;1050: &#x000A;1051:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:form</span>]&#x000A;1052:           <span class="ruby-identifier">js_options</span>[<span class="ruby-value str">'parameters'</span>] = <span class="ruby-value str">'Form.serialize(this)'</span>&#x000A;1053:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:submit</span>]&#x000A;1054:           <span class="ruby-identifier">js_options</span>[<span class="ruby-value str">'parameters'</span>] = <span class="ruby-node">&quot;Form.serialize('#{options[:submit]}')&quot;</span>&#x000A;1055:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:with</span>]&#x000A;1056:           <span class="ruby-identifier">js_options</span>[<span class="ruby-value str">'parameters'</span>] = <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:with</span>]&#x000A;1057:         <span class="ruby-keyword kw">end</span>&#x000A;1058: &#x000A;1059:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">protect_against_forgery?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">options</span>[<span class="ruby-identifier">:form</span>]&#x000A;1060:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">js_options</span>[<span class="ruby-value str">'parameters'</span>]&#x000A;1061:             <span class="ruby-identifier">js_options</span>[<span class="ruby-value str">'parameters'</span>] <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot; + '&amp;&quot;</span>&#x000A;1062:           <span class="ruby-keyword kw">else</span>&#x000A;1063:             <span class="ruby-identifier">js_options</span>[<span class="ruby-value str">'parameters'</span>] = <span class="ruby-value str">&quot;'&quot;</span>&#x000A;1064:           <span class="ruby-keyword kw">end</span>&#x000A;1065:           <span class="ruby-identifier">js_options</span>[<span class="ruby-value str">'parameters'</span>] <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;#{request_forgery_protection_token}=' + encodeURIComponent('#{escape_javascript form_authenticity_token}')&quot;</span>&#x000A;1066:         <span class="ruby-keyword kw">end</span>&#x000A;1067: &#x000A;1068:         <span class="ruby-identifier">options_for_javascript</span>(<span class="ruby-identifier">js_options</span>)&#x000A;1069:       <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div id='footer-push'></div>
    </div>
    <div id='footer'>
      <a href="http://github.com/mislav/hanna/tree/master"><strong>Hanna</strong> RDoc template</a>
    </div>
  </body>
</html>
